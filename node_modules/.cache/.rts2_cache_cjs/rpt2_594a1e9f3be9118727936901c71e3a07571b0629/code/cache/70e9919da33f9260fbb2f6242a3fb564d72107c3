{"code":"import { useEffect, useMemo } from 'react';\r\nimport { useContextSelector } from 'use-context-selector';\r\nimport { ResponseStateContext } from '../store/responseState/reducer';\r\nimport { ResponseStateCategory } from '../store/responseState/types';\r\nimport { StoreContext } from '../store/rootReducer';\r\nimport { useHeadersActions } from './useHeaders';\r\nimport { useManualApi } from './useManualApi';\r\nimport { PassengerFieldsFromApi, } from './usePassengersData';\r\nimport useSetResponseState from './useSetResponseState';\r\nimport { useUserActions } from './useUser';\r\nimport { emptyTickets } from './useUserTickets';\r\nimport { basketItemsToTicketTypes, createTxToken, gtmPush } from './utils';\r\nconst API_CONFIG = {\r\n    headers: { 'Content-Type': 'application/1.2.0+json' },\r\n    method: 'POST',\r\n};\r\nconst usePayment = (tickets = emptyTickets, credit = false, ticketState = 'UNPAID') => {\r\n    const { authorize } = useHeadersActions();\r\n    const { setPaymentCode } = useUserActions();\r\n    const { user, paymentMethodCode } = useContextSelector(StoreContext, (c) => c.state.user);\r\n    const setState = useSetResponseState(ResponseStateCategory.payment);\r\n    const categoryState = useContextSelector(ResponseStateContext, (c) => c.state[ResponseStateCategory.payment]);\r\n    const ticketIds = basketItemsToTicketTypes(ticketState === 'UNPAID'\r\n        ? tickets\r\n        : {\r\n            RJ_SEAT: tickets.RJ_SEAT.filter((t) => t.unpaid),\r\n            RJ_SRO: [],\r\n            RJ_TIME: [],\r\n        });\r\n    const [{ data: paymentMethods, error: paymentMethodsError, loading: paymentMethodsLoading, }, fetchPaymentMethods,] = useManualApi({\r\n        headers: { 'Content-Type': 'application/1.1.0+json' },\r\n        method: 'POST',\r\n        url: '/payments/methods',\r\n    });\r\n    const [{ data: paymentForm, error: paymentFormError, loading: paymentFormLoading }, fetchPaymentForm,] = useManualApi({ method: 'POST', url: '/payments/form' });\r\n    const [{ error: payError, loading: payLoading }, fetchPay] = useManualApi({\r\n        url: '/payments/pay',\r\n        ...API_CONFIG,\r\n    });\r\n    const [{ error: giftAddError, loading: giftAddLoading }, fetchGiftAdd] = useManualApi({\r\n        url: '/payments/credit/giftCertificate/add',\r\n        method: 'POST',\r\n    });\r\n    const [{ error: chargeCreditError, loading: chargeCreditLoading }, fetchChargeFromCredit,] = useManualApi({\r\n        url: '/payments/credit/charge',\r\n        ...API_CONFIG,\r\n    });\r\n    const getPaymentMethods = async (ticketsTypeIds, signal) => {\r\n        try {\r\n            await fetchPaymentMethods({\r\n                data: { ticketIds: credit ? [] : ticketsTypeIds || ticketIds },\r\n                signal,\r\n            });\r\n        }\r\n        catch { }\r\n    };\r\n    const getPaymentForm = async (ticket, manualPaymentMethodCode, signal) => {\r\n        try {\r\n            const { data } = await fetchPaymentForm({\r\n                data: {\r\n                    paymentMethodCode: manualPaymentMethodCode || paymentMethodCode,\r\n                    ...(credit\r\n                        ? { tickets: [] }\r\n                        : { ticketIds: ticket ? [ticket] : ticketIds }),\r\n                },\r\n                headers: {\r\n                    ...(!credit ? { 'Content-Type': 'application/1.1.0+json' } : {}),\r\n                },\r\n                signal,\r\n            });\r\n            return data;\r\n        }\r\n        catch { }\r\n    };\r\n    const buyTickets = async (rememberCard = false, fields = {}, boughtTickets = ticketIds, fromCredit = false, signal, useCreditChargeWithFormFields) => {\r\n        try {\r\n            const headers = { ...API_CONFIG.headers, 'X-TxToken': createTxToken() };\r\n            const { email = user?.email, ...restFields } = fields;\r\n            const formFields = [\r\n                { fieldType: PassengerFieldsFromApi.email, fieldValue: email },\r\n                ...Object.entries(restFields)\r\n                    .filter(([, fieldValue]) => fieldValue)\r\n                    .map(([k, fieldValue]) => ({\r\n                    fieldType: PassengerFieldsFromApi[k],\r\n                    fieldValue,\r\n                })),\r\n            ];\r\n            const correlationId = `tickets&${boughtTickets\r\n                .map((t) => `${t.type}=${t.id}`)\r\n                .join('&')}`;\r\n            if (user && fromCredit) {\r\n                await fetchChargeFromCredit({\r\n                    data: { tickets: boughtTickets, ...(formFields?.length && useCreditChargeWithFormFields ? { formFields } : {}) },\r\n                    headers,\r\n                    signal,\r\n                });\r\n                await authorize(signal);\r\n                return { type: 'credit', url: correlationId };\r\n            }\r\n            const payload = {\r\n                correlationId,\r\n                formFields,\r\n                paymentMethodCode,\r\n                rememberCard,\r\n                tickets: boughtTickets,\r\n            };\r\n            gtmPush({ event: 'PAY', PAY: payload });\r\n            const { data } = await fetchPay({ data: payload, headers, signal });\r\n            return { type: 'payment', url: data.payRedirectUrl };\r\n        }\r\n        catch { }\r\n        return null;\r\n    };\r\n    const addCreditByGift = async (data, signal) => {\r\n        try {\r\n            await fetchGiftAdd({ data, signal });\r\n            return true;\r\n        }\r\n        catch {\r\n            return false;\r\n        }\r\n    };\r\n    const filteredPaymentMethods = useMemo(() => paymentMethods?.filter((m) => m.active && m.paymentType), [paymentMethods]);\r\n    const error = paymentMethodsError ||\r\n        paymentFormError ||\r\n        payError ||\r\n        giftAddError ||\r\n        chargeCreditError;\r\n    const loading = paymentMethodsLoading ||\r\n        paymentFormLoading ||\r\n        payLoading ||\r\n        giftAddLoading ||\r\n        chargeCreditLoading;\r\n    useEffect(() => {\r\n        setState(error?.response?.data?.message, loading);\r\n    }, [error, loading]);\r\n    useEffect(() => {\r\n        if (paymentMethodCode &&\r\n            filteredPaymentMethods?.length &&\r\n            !filteredPaymentMethods.some((m) => m.paymentMethodCode === paymentMethodCode)) {\r\n            setPaymentCode(null);\r\n        }\r\n    }, [filteredPaymentMethods]);\r\n    useEffect(() => {\r\n        const abortController = new AbortController();\r\n        const signal = abortController.signal;\r\n        if (!credit && ticketIds?.length) {\r\n            fetchPaymentMethods({ data: { ticketIds }, signal });\r\n        }\r\n        else if (credit) {\r\n            fetchPaymentMethods({ data: { ticketIds: [] }, signal });\r\n        }\r\n        return () => {\r\n            abortController.abort();\r\n        };\r\n    }, [tickets, credit]);\r\n    return {\r\n        addCreditByGift,\r\n        buyTickets,\r\n        getPaymentForm,\r\n        getPaymentMethods,\r\n        paymentForm,\r\n        paymentFormLoading,\r\n        paymentMethodsLoading,\r\n        paymentMethods: filteredPaymentMethods,\r\n        ticketsAvailable: !!ticketIds?.length,\r\n        ...categoryState,\r\n    };\r\n};\r\nexport default usePayment;\r\n//# sourceMappingURL=usePayment.js.map","references":["/home/karelpelcak/Documents/repo/rj-shop-bl/node_modules/@types/react/index.d.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/node_modules/axios/index.d.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/node_modules/axios/index.d.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/node_modules/use-context-selector/dist/src/index.d.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/store/responseState/reducer.tsx","/home/karelpelcak/Documents/repo/rj-shop-bl/src/store/responseState/types.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/store/rootReducer.tsx","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/types.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/useHeaders.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/useManualApi.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/usePassengersData.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/useSetResponseState.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/useUser.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/useUserTickets.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/utils.ts"],"map":"{\"version\":3,\"file\":\"usePayment.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/hooks/usePayment.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/karelpelcak/Documents/repo/rj-shop-bl/dist/hooks/usePayment.d.ts","writeByteOrderMark":false,"text":"import type { GenericAbortSignal } from 'axios';\r\nimport { DateString, PaymentMethod, PaymentType, TicketState, TicketType } from './types';\r\nimport { PassengerFieldsFromApi, PassengerFieldsToSend } from './usePassengersData';\r\nimport { Tickets } from './useUserTickets';\r\nexport interface TicketTypeId {\r\n    id: number;\r\n    type: TicketType;\r\n}\r\nexport interface Payment {\r\n    paymentMethodCode: PaymentMethod;\r\n    paymentType: PaymentType | null;\r\n    rememberCardEnabled: boolean;\r\n    active: boolean;\r\n    description: string;\r\n    deadline: DateString | null;\r\n    deadlineAt: number | null;\r\n}\r\nexport interface PaymentForm {\r\n    fieldName: string;\r\n    fieldType: PassengerFieldsFromApi;\r\n}\r\nexport interface PayResponse {\r\n    payRedirectUrl: string;\r\n    regiojetRedirectUrl: string;\r\n}\r\nexport interface AddGiftPayload {\r\n    certificate: string;\r\n    email: string;\r\n}\r\nexport type BuyTicketsType = 'credit' | 'payment';\r\nexport interface BuyTicketsResponse {\r\n    type: BuyTicketsType;\r\n    url: string | null;\r\n}\r\ndeclare const usePayment: (tickets?: Tickets, credit?: boolean, ticketState?: TicketState) => {\r\n    error?: {\r\n        message?: string | undefined;\r\n        errorFields?: import(\"../store/responseState/types\").ErrorFields[] | undefined;\r\n    } | undefined;\r\n    loading: boolean;\r\n    addCreditByGift: (data: AddGiftPayload, signal?: GenericAbortSignal) => Promise<boolean>;\r\n    buyTickets: (rememberCard?: boolean, fields?: Partial<Record<PassengerFieldsToSend, string>>, boughtTickets?: TicketTypeId[] | undefined, fromCredit?: boolean, signal?: GenericAbortSignal, useCreditChargeWithFormFields?: boolean) => Promise<BuyTicketsResponse | null>;\r\n    getPaymentForm: (ticket?: TicketTypeId, manualPaymentMethodCode?: PaymentMethod, signal?: GenericAbortSignal) => Promise<PaymentForm[] | undefined>;\r\n    getPaymentMethods: (ticketsTypeIds?: TicketTypeId[], signal?: GenericAbortSignal) => Promise<void>;\r\n    paymentForm: PaymentForm[] | undefined;\r\n    paymentFormLoading: boolean;\r\n    paymentMethodsLoading: boolean;\r\n    paymentMethods: Payment[] | undefined;\r\n    ticketsAvailable: boolean;\r\n};\r\nexport default usePayment;\r\n"}}
