{"code":"import equal from 'fast-deep-equal/es6/react';\r\nexport const basketItemsToTicketTypes = (tickets) => Object.entries(tickets).reduce((prev, [type, ticketList]) => {\r\n    if (!ticketList.length) {\r\n        return prev;\r\n    }\r\n    prev.push(...ticketList.map(({ id, sroTicketId }) => ({\r\n        id: id || sroTicketId,\r\n        type,\r\n    })));\r\n    return prev;\r\n}, []);\r\nexport const createTxToken = () => {\r\n    let result = '';\r\n    let rest = '';\r\n    let number = new Date().valueOf();\r\n    const characters = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\r\n    while (number > 1) {\r\n        const remainder = Math.floor(number % characters.length);\r\n        number /= characters.length;\r\n        result += characters[remainder];\r\n    }\r\n    for (let i = result.length; i < 8; i++) {\r\n        rest += '1';\r\n    }\r\n    return rest + result;\r\n};\r\nexport const mapFieldToUser = Object.freeze({\r\n    EMAIL: 'email',\r\n    FIRST_NAME: 'firstName',\r\n    SURNAME: 'surname',\r\n});\r\nexport const couchetteClasses = [\r\n    'TRAIN_COUCHETTE_BUSINESS_4',\r\n    'TRAIN_COUCHETTE_BUSINESS',\r\n];\r\nexport const getMoreExpensiveClass = (baseClass, priceClasses) => {\r\n    const actualClassIndex = priceClasses.findIndex((pc) => pc.seatClassKey === baseClass);\r\n    const actualClass = priceClasses[actualClassIndex];\r\n    const moreExpensiveClass = priceClasses[actualClassIndex + 1];\r\n    if (!actualClass || // Not found\r\n        !moreExpensiveClass || // Last class selected\r\n        actualClass.type !== 'RJ_SEAT' || // Don't offer timetickets\r\n        moreExpensiveClass.type !== 'RJ_SEAT' ||\r\n        actualClass.price >= moreExpensiveClass.price || // Don't offer cheaper class\r\n        moreExpensiveClass.price / actualClass.price > 1.5 || // The price difference is lower than 50%\r\n        actualClass.seatClassKey === moreExpensiveClass.seatClassKey || // Don't offer same class (e.g. action prices)\r\n        actualClass.actionPrice || // Don't offer for employee / with bicycle etc\r\n        moreExpensiveClass.actionPrice || // Don't offer upsell class with bicycle...\r\n        couchetteClasses.includes(moreExpensiveClass.seatClassKey) // Don't offer coupe\r\n    ) {\r\n        return null;\r\n    }\r\n    return moreExpensiveClass;\r\n};\r\nconst shouldIgnoreAction = (event) => event === 'SET_RESPONSE_STATE';\r\nexport const gtmPush = (payload) => {\r\n    if (typeof window !== 'undefined' &&\r\n        // @ts-expect-error dataLayer\r\n        window.dataLayer?.push &&\r\n        !shouldIgnoreAction(payload.event)) {\r\n        // @ts-expect-error dataLayer\r\n        window.dataLayer.push(payload);\r\n    }\r\n};\r\nexport const getAffiliateCode = () => {\r\n    const affiliateCode = typeof localStorage !== 'undefined'\r\n        ? localStorage.getItem('affiliateCode')\r\n        : '';\r\n    if (!affiliateCode) {\r\n        return undefined;\r\n    }\r\n    const expirationTs = parseInt(localStorage.getItem('affiliateCodeExpiration') || '', 10);\r\n    if (expirationTs < new Date().valueOf()) {\r\n        localStorage.removeItem('affiliateCode');\r\n        localStorage.removeItem('affiliateCodeExpiration');\r\n        return undefined;\r\n    }\r\n    return affiliateCode;\r\n};\r\nexport const mapFromToSections = (depArrSections) => depArrSections.map((s) => ({\r\n    sectionId: s.id,\r\n    fromStationId: s.departureStationId,\r\n    toStationId: s.arrivalStationId,\r\n}));\r\nexport const r8Stations = [\r\n    4987881000, 3088864001, 4961583000, 5009212000, 4961583001, 2370298003,\r\n    372825006, 5095524133, 5095524027, 372825007, 372825008, 4961583004, 7063331002,\r\n];\r\nexport const r23Stations = [\r\n    5010256458, 5812866010, 5145776001, 5010257320, 5812866008, 5812866007,\r\n    5812866006, 5812866005, 5812866004, 5812866003, 5812866002, 5812866001,\r\n    3088864000, 5812866009,\r\n];\r\nexport const isRegional = (fromStationId, toStationId) => (r8Stations.includes(fromStationId) && r8Stations.includes(toStationId)) ||\r\n    (r23Stations.includes(fromStationId) && r23Stations.includes(toStationId));\r\n/**\r\n * Soft booking can book other seat than selected. We need to inform user about it\r\n */\r\nexport const getNewSeats = (reqSeats, respSeats) => equal(reqSeats, respSeats)\r\n    ? []\r\n    : respSeats.filter((respSeat) => !reqSeats.some((reqSeat) => equal(reqSeat, respSeat)));\r\nexport const getAddonTranslationKey = (addonCode, prependAll) => {\r\n    const lowerCaseAddon = addonCode.toLowerCase();\r\n    if (lowerCaseAddon.includes('kolo')) {\r\n        return 'addon.bike';\r\n    }\r\n    if (lowerCaseAddon.includes('lyze')) {\r\n        return 'addon.ski';\r\n    }\r\n    if (lowerCaseAddon.includes('parkovani')) {\r\n        return 'addon.parking';\r\n    }\r\n    if (lowerCaseAddon.includes('zavazadlo')) {\r\n        return 'addon.luggage';\r\n    }\r\n    if (lowerCaseAddon.includes('smartguide')) {\r\n        return 'addon.smartguide';\r\n    }\r\n    if (lowerCaseAddon.includes('berider')) {\r\n        return 'addon.berider';\r\n    }\r\n    if (lowerCaseAddon.includes('hoppygo')) {\r\n        return 'addon.hoppygo';\r\n    }\r\n    if (prependAll) {\r\n        return 'addon.' + addonCode;\r\n    }\r\n    return addonCode;\r\n};\r\nexport const unorderedArrayEqual = (arr1, arr2) => {\r\n    if (!arr1 || !arr2) {\r\n        return false;\r\n    }\r\n    const sorted1 = arr1.sort();\r\n    const sorted2 = arr2.sort();\r\n    return sorted1.every((e, i) => sorted2[i] === e);\r\n};\r\nexport const calculateDistance = (lat1, lon1, lat2, lon2) => {\r\n    const p = 0.017453292519943295; // Math.PI / 180\r\n    const a = 0.5 -\r\n        Math.cos((lat2 - lat1) * p) / 2 +\r\n        (Math.cos(lat1 * p) *\r\n            Math.cos(lat2 * p) *\r\n            (1 - Math.cos((lon2 - lon1) * p))) /\r\n            2;\r\n    return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n};\r\nexport const getPriorityInArray = (arr, item) => arr.includes(item) ? arr.indexOf(item) : arr.length;\r\n//# sourceMappingURL=utils.js.map","references":["/home/karelpelcak/Documents/repo/rj-shop-bl/node_modules/fast-deep-equal/es6/react.d.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/store/booking/types.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/types.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/useConnectionRoute.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/usePayment.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/useUserTickets.ts"],"map":"{\"version\":3,\"file\":\"utils.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/hooks/utils.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/karelpelcak/Documents/repo/rj-shop-bl/dist/hooks/utils.d.ts","writeByteOrderMark":false,"text":"import { SectionWithSeats } from '../store/booking/types';\r\nimport { SeatClass, SelectedSeat } from './types';\r\nimport { PriceClass, Section } from './useConnectionRoute';\r\nimport { TicketTypeId } from './usePayment';\r\nimport { Tickets } from './useUserTickets';\r\nexport declare const basketItemsToTicketTypes: (tickets: Tickets) => TicketTypeId[];\r\nexport declare const createTxToken: () => string;\r\nexport declare const mapFieldToUser: Readonly<{\r\n    EMAIL: \"email\";\r\n    FIRST_NAME: \"firstName\";\r\n    SURNAME: \"surname\";\r\n}>;\r\nexport declare const couchetteClasses: `${SeatClass}`[];\r\nexport declare const getMoreExpensiveClass: (baseClass: SeatClass, priceClasses: PriceClass[]) => PriceClass | null;\r\nexport declare const gtmPush: (payload: {\r\n    [key: string]: any;\r\n    event: string;\r\n}) => void;\r\nexport declare const getAffiliateCode: () => string | undefined;\r\nexport declare const mapFromToSections: (depArrSections: Section[]) => SectionWithSeats[];\r\nexport declare const r8Stations: number[];\r\nexport declare const r23Stations: number[];\r\nexport declare const isRegional: (fromStationId: number, toStationId: number) => boolean;\r\n/**\r\n * Soft booking can book other seat than selected. We need to inform user about it\r\n */\r\nexport declare const getNewSeats: (reqSeats: SelectedSeat[], respSeats: SelectedSeat[]) => SelectedSeat[];\r\nexport declare const getAddonTranslationKey: (addonCode: string, prependAll?: boolean) => string;\r\nexport declare const unorderedArrayEqual: (arr1: string[], arr2: string[]) => boolean;\r\nexport declare const calculateDistance: (lat1: number, lon1: number, lat2: number, lon2: number) => number;\r\nexport declare const getPriorityInArray: <Item>(arr: Item[], item: Item) => number;\r\n"}}
