{"code":"import { useEffect } from 'react';\r\nimport { useContextSelector } from 'use-context-selector';\r\nimport { ResponseStateContext } from '../store/responseState/reducer';\r\nimport { ResponseStateCategory } from '../store/responseState/types';\r\nimport { useManualApi } from './useManualApi';\r\nimport useSetResponseState from './useSetResponseState';\r\nconst useSeats = (options) => {\r\n    const [{ data, error, loading }, fetch] = useManualApi({\r\n        method: 'POST',\r\n    });\r\n    const setState = useSetResponseState(ResponseStateCategory.seats);\r\n    const categoryState = useContextSelector(ResponseStateContext, (c) => options?.ignoreGlobalState\r\n        ? undefined\r\n        : c.state[ResponseStateCategory.seats]);\r\n    const fetchSeats = async (reqData, signal) => {\r\n        try {\r\n            await fetch({\r\n                url: '/routes/freeSeats',\r\n                data: reqData,\r\n                headers: { 'Content-Type': 'application/json' },\r\n                signal,\r\n            });\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        if (options?.ignoreGlobalState) {\r\n            return;\r\n        }\r\n        setState(error?.response?.data?.message, loading);\r\n    }, [options?.ignoreGlobalState, error, loading]);\r\n    return {\r\n        data,\r\n        fetchSeats,\r\n        error,\r\n        loading,\r\n        ...categoryState,\r\n    };\r\n};\r\nexport default useSeats;\r\n//# sourceMappingURL=useSeats.js.map","references":["/home/karelpelcak/Documents/repo/rj-shop-bl/node_modules/@types/react/index.d.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/node_modules/axios/index.d.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/node_modules/use-context-selector/dist/src/index.d.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/store/responseState/reducer.tsx","/home/karelpelcak/Documents/repo/rj-shop-bl/src/store/responseState/types.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/types.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/useConnectionRoute.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/useManualApi.ts","/home/karelpelcak/Documents/repo/rj-shop-bl/src/hooks/useSetResponseState.ts"],"map":"{\"version\":3,\"file\":\"useSeats.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/hooks/useSeats.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAElC,OAAO,EAAE,kBAAkB,EAAE,MAAM,sBAAsB,CAAC;AAC1D,OAAO,EAAE,oBAAoB,EAAE,MAAM,gCAAgC,CAAC;AACtE,OAAO,EAAE,qBAAqB,EAAE,MAAM,8BAA8B,CAAC;AAUrE,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AAC9C,OAAO,mBAAmB,MAAM,uBAAuB,CAAC;AAiExD,MAAM,QAAQ,GAAG,CAAC,OAAiB,EAAE,EAAE;IACrC,MAAM,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,KAAK,CAAC,GAAG,YAAY,CAAgB;QACpE,MAAM,EAAE,MAAM;KACf,CAAC,CAAC;IACH,MAAM,QAAQ,GAAG,mBAAmB,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;IAClE,MAAM,aAAa,GAAG,kBAAkB,CAAC,oBAAoB,EAAE,CAAC,CAAC,EAAE,EAAE,CACnE,OAAO,EAAE,iBAAiB;QACxB,CAAC,CAAC,SAAS;QACX,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,qBAAqB,CAAC,KAAK,CAAC,CACzC,CAAC;IAEF,MAAM,UAAU,GAAG,KAAK,EACtB,OAAqB,EACrB,MAA2B,EAC3B,EAAE;QACF,IAAI;YACF,MAAM,KAAK,CAAC;gBACV,GAAG,EAAE,mBAAmB;gBACxB,IAAI,EAAE,OAAO;gBACb,OAAO,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE;gBAC/C,MAAM;aACP,CAAC,CAAC;YAEH,OAAO,IAAI,CAAC;SACb;QAAC,OAAO,CAAC,EAAE;YACV,OAAO,KAAK,CAAC;SACd;IACH,CAAC,CAAC;IAEF,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,OAAO,EAAE,iBAAiB,EAAE;YAC9B,OAAO;SACR;QACD,QAAQ,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;IACpD,CAAC,EAAE,CAAC,OAAO,EAAE,iBAAiB,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;IAEjD,OAAO;QACL,IAAI;QACJ,UAAU;QACV,KAAK;QACL,OAAO;QACP,GAAG,aAAa;KACjB,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,QAAQ,CAAC\"}","dts":{"name":"/home/karelpelcak/Documents/repo/rj-shop-bl/dist/hooks/useSeats.d.ts","writeByteOrderMark":false,"text":"import type { GenericAbortSignal } from 'axios';\r\nimport { SeatClass, SeatSectionBasic, SelectedSeat, Tariff, VehicleType, VehicleKey } from './types';\r\nimport { Service } from './useConnectionRoute';\r\nexport interface PreselectedSeat extends SelectedSeat {\r\n    vehicleDeckNumber: number;\r\n}\r\nexport interface SectionCommons {\r\n    fixedSeatReservation: boolean;\r\n    selectedSeats: SelectedSeat[];\r\n    vehicles: Vehicle[];\r\n}\r\nexport interface SeatSection extends SectionCommons {\r\n    selectedSeats: PreselectedSeat[];\r\n    sectionId: number;\r\n}\r\nexport interface VehicleService {\r\n    code: string;\r\n    name: string;\r\n    imageCode: Service;\r\n}\r\nexport interface VehicleSeatClass {\r\n    name: SeatClass;\r\n    services: VehicleService[];\r\n}\r\nexport interface Vehicle {\r\n    id: number;\r\n    code: string | null;\r\n    type: VehicleType;\r\n    number: number;\r\n    seatClasses: VehicleSeatClass[];\r\n    standard: VehicleKey;\r\n    notifications: string[];\r\n    cateringEnabled: boolean;\r\n    decks: Deck[];\r\n}\r\nexport interface Deck {\r\n    number: number;\r\n    name: string;\r\n    layoutURL: string;\r\n    freeSeats: Seat[];\r\n    occupiedSeats: Seat[];\r\n}\r\nexport interface Seat {\r\n    index: number;\r\n    seatClass: SeatClass;\r\n    seatConstraint: null | string;\r\n    seatNotes: string[];\r\n}\r\nexport interface SeatsPayload {\r\n    seatClass: SeatClass;\r\n    sections: SeatSectionBasic[];\r\n    tariffs: Tariff[];\r\n}\r\ntype Options = {\r\n    ignoreGlobalState?: boolean;\r\n};\r\ndeclare const useSeats: (options?: Options) => {\r\n    error: import(\"axios\").AxiosError<any, any> | {\r\n        message?: string | undefined;\r\n        errorFields?: import(\"../store/responseState/types\").ErrorFields[] | undefined;\r\n    } | null;\r\n    loading: boolean;\r\n    data: SeatSection[] | undefined;\r\n    fetchSeats: (reqData: SeatsPayload, signal?: GenericAbortSignal) => Promise<boolean>;\r\n};\r\nexport default useSeats;\r\n"}}
